<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô | Tutor</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Navbar -->
  <link rel="stylesheet" href="../CSS/navbar.css" />
  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ -->
  <link rel="stylesheet" href="../CSS/favorites.css" />
  <style>
    html, body { height:100%; display:flex; flex-direction:column; }
    .site-footer { margin-top:auto; }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <header class="cc-navbar" role="navigation" aria-label="‡∏´‡∏•‡∏±‡∏Å">
    <div class="cc-nav-wrap">
      <a class="cc-brand" href="/Home/Home.html" aria-label="Tutor ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">
        <span class="cc-logo" aria-hidden="true">‚¨¢</span>
        <strong class="cc-site">Tutor</strong>
      </a>

      <ul class="cc-links">
        <li><a href="/Teacher/teacher.html">‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</a></li>
        <li><a href="favorites.html" aria-current="page">‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
      </ul>

      <div class="cc-right">
         <a class="cc-icon" href="/Booked/Booked.html" aria-label="‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM7 11h2v2H7z"/></svg>
        </a>
        <a class="cc-icon" href="/Teacher/favorites.html" aria-label="‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 21s-6.7-4.4-9.1-7.6C.6 10.8 1.4 7.2 4.4 6 6.3 5.2 8.3 5.7 9.7 7c.5.5.9 1.1 1.1 1.7.3-.6.7-1.2 1.2-1.7 1.4-1.4 3.4-1.8 5.3-.9 3 1.3 3.7 4.8 1.5 7.4C18.7 16.6 12 21 12 21z"/></svg>
        </a>
        <a class="cc-icon" href="/Teacher/notifications.html" aria-label="‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 22a2 2 0 002-2H10a2 2 0 002 2zm6-6V11a6 6 0 10-12 0v5L4 18v1h16v-1l-2-2z"/></svg>
        </a>
        <a class="cc-avatar" href="/Profile/account.html" aria-label="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">
          <img src="https://i.pravatar.cc/36?img=68" alt="‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
        </a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="fav-hero">
    <div class="container">
      <h1>‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô <span id="favCount" class="badge-count">0</span></h1>

      <div class="toolbar" role="region" aria-label="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡πä‡∏Ñ‡∏°‡∏≤‡∏£‡πå‡∏Ñ">
        <div class="left">
          <label for="sort" class="sr-only">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</label>
          <select id="sort" class="cc-select-inline" aria-label="‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö">
            <option value="saved">‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</option>
            <option value="name">‡∏ä‡∏∑‡πà‡∏≠ (A‚ÄìZ)</option>
            <option value="price-asc">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≥ ‚Üí ‡∏™‡∏π‡∏á</option>
            <option value="price-desc">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á ‚Üí ‡∏ï‡πà‡∏≥</option>
          </select>
        </div>
        <div class="right">
          <button id="btnClear" class="cc-btn ghost" aria-label="‡∏•‡∏ö‡∏ö‡∏∏‡πä‡∏Ñ‡∏°‡∏≤‡∏£‡πå‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </div>
      </div>
    </div>
  </section>

  <!-- LIST -->
  <main class="container cards" id="favList" aria-live="polite" aria-busy="false"></main>

  <!-- EMPTY STATE -->
  <template id="tpl-empty">
    <section class="empty">
      <div class="empty-card">
        <div class="empty-emoji" aria-hidden="true">ü´∂</div>
        <h2>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏à</h2>
        <p>‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏î‡∏π‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á</p>
        <a class="btn primary" href="/Teacher/teacher.html">‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</a>
      </div>
    </section>
  </template>

  <!-- CARD TEMPLATE -->
  <template id="tpl-card">
    <article class="card">
      <button class="fav-toggle on" aria-pressed="true" aria-label="‡∏ô‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡∏∏‡πä‡∏Ñ‡∏°‡∏≤‡∏£‡πå‡∏Ñ">‚ù§</button>

      <a class="avatar" href="#" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">
        <img src="" alt="‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">
      </a>

      <div class="body">
        <header class="card-top">
          <h2><a class="title" href="#"></a></h2>
          <div class="meta">
            <span class="subject light"></span>
          </div>
        </header>

        <p class="excerpt small" style="margin:.25rem 0 .5rem 0;"></p>

        <div class="chips" aria-label="‡πÅ‡∏ó‡πá‡∏Å" style="display:flex;flex-wrap:wrap;gap:.4rem;"></div>

        <footer class="card-bottom" style="margin-top:.6rem;">
          <div class="stats"><span class="price">‚Äî</span></div>
          <div class="cta"><a class="btn primary open-profile" href="#">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a></div>
        </footer>
      </div>
    </article>
  </template>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-inner">
      ¬© 2025  ¬∑ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
    </div>
  </footer>

  <!-- Navbar JS -->
  <script src="navbar.js" defer></script>

  <!-- Favorites JS (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥) -->
  <script>
  (function(){
    'use strict';

    const LS_KEY = 'favorites.items';
    const BADGE_KEY = 'favorites.count';
    const $  = s => document.querySelector(s);

    const listEl   = $('#favList');
    const countEl  = $('#favCount');
    const sortEl   = $('#sort');
    const clearBtn = $('#btnClear');

    function loadFavs(){
      try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; }
      catch { return []; }
    }
    function saveFavs(items){
      localStorage.setItem(LS_KEY, JSON.stringify(items));
      localStorage.setItem(BADGE_KEY, String(items.length));
      window.dispatchEvent(new StorageEvent('storage', { key: BADGE_KEY, newValue: String(items.length) }));
    }

    // ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô "‡∏ö‡∏≤‡∏ó"
    function formatPrice(p){
      if(!p) return '‚Äî';
      const n = parseInt(p, 10);
      if(Number.isNaN(n)) return '‚Äî';
      return `${n.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó <small>/ 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</small>`;
    }

    function sortItems(items, mode){
      const cp = items.slice();
      if(mode === 'name'){
        cp.sort((a,b)=> (a.title||'').localeCompare(b.title||'', 'th'));
      } else if(mode === 'price-asc'){
        cp.sort((a,b)=> (parseInt(a.price||999999,10) - parseInt(b.price||999999,10)));
      } else if(mode === 'price-desc'){
        cp.sort((a,b)=> (parseInt(b.price||-1,10) - parseInt(a.price||-1,10)));
      }
      return cp;
    }

    function removeById(id){
      const items = loadFavs();
      const idx = items.findIndex(x => x.id === id);
      if(idx >= 0){
        items.splice(idx,1);
        saveFavs(items);
        render();
      }
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î favorites ‡πÄ‡∏Å‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏°‡∏µ subject/tags ‡πÅ‡∏•‡∏∞ price ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
   (function upgradeOldFavorites(){
  const raw = localStorage.getItem(LS_KEY);
  if (!raw) return;

  let items = [];
  try { items = JSON.parse(raw) || []; } catch { items = []; }

  let changed = false;

  // map ‡∏ï‡∏≤‡∏° id ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ subject ‡πÄ‡∏î‡∏¥‡∏°‡∏ß‡πà‡∏≤‡∏á)
  const id2SubjTH = {
    aree:'‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',
    prasit:'‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
    somchai:'‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
    somsri:'‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢',
    peerapon:'‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤',
    tawan:'‡∏®‡∏¥‡∏•‡∏õ‡∏∞'
  };
  const id2Tags = {
    aree:'‡πÅ‡∏Å‡∏£‡∏°‡∏°‡πà‡∏≤ ‡∏™‡∏ô‡∏ó‡∏ô‡∏≤',
    prasit:'‡∏û‡∏µ‡∏ä‡∏Ñ‡∏ì‡∏¥‡∏ï ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï PAT1',
    somchai:'‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡πÄ‡∏Ñ‡∏°‡∏µ ‡∏ä‡∏µ‡∏ß‡∏∞',
    somsri:'‡∏≠‡πà‡∏≤‡∏ô ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå',
    peerapon:'‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
    tawan:'‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏™‡∏µ ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠'
  };

  // ‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‚Üí ‡πÑ‡∏ó‡∏¢ ‚Äú‡πÄ‡∏™‡∏°‡∏≠‚Äù (‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡πá‡∏ô English)
  const en2th = {
    English:'‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',
    Math:'‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
    Science:'‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
    Thai:'‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢',
    Social:'‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤',
    Art:'‡∏®‡∏¥‡∏•‡∏õ‡∏∞'
  };

  items.forEach(it=>{
    const key = ((it.id || it.href || '').toLowerCase());
    const guessId =
      key.includes('aree') ? 'aree' :
      key.includes('prasit') ? 'prasit' :
      key.includes('somchai') ? 'somchai' :
      key.includes('somsri') ? 'somsri' :
      key.includes('peerapon') ? 'peerapon' :
      key.includes('tawan') ? 'tawan' : '';

    // ‡∏ñ‡πâ‡∏≤ subject ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ó‡∏¢
    if (it.subject && en2th[it.subject]) {
      it.subject = en2th[it.subject];
      changed = true;
    }

    // ‡∏ñ‡πâ‡∏≤ subject ‡∏ß‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å id ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
    if (!it.subject && guessId) {
      it.subject = id2SubjTH[guessId];
      changed = true;
    }

    // ‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏ó‡πá‡∏Å‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ
    if (!it.tags && guessId) {
      it.tags = id2Tags[guessId];
      changed = true;
    }

    // ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏•‡πâ‡∏ß‡∏ô
    if (typeof it.price === 'string') {
      const num = it.price.replace(/[^\d]/g, '');
      if (num) { it.price = num; changed = true; }
    }
  });

  if (changed) localStorage.setItem(LS_KEY, JSON.stringify(items));
})();

    function render(){
      listEl.setAttribute('aria-busy', 'true');
      listEl.innerHTML = '';

      const items = sortItems(loadFavs(), sortEl.value);
      countEl.textContent = items.length;

      if(items.length === 0){
        const empty = document.importNode(document.querySelector('#tpl-empty').content, true);
        listEl.appendChild(empty);
        listEl.setAttribute('aria-busy', 'false');
        return;
      }

      const tpl = document.querySelector('#tpl-card');
      items.forEach(item=>{
        const node = document.importNode(tpl.content, true);

        const btnFav   = node.querySelector('.fav-toggle');
        const avatarA  = node.querySelector('.avatar');
        const img      = node.querySelector('img');
        const titleA   = node.querySelector('.title');
        const priceEl  = node.querySelector('.price');
        const openBtn  = node.querySelector('.open-profile');
        const subjectEl= node.querySelector('.subject');
        const chipsWrap= node.querySelector('.chips');

        avatarA.href = item.href || '#';
        img.src = item.avatar || '';
        img.alt = `‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ${item.title || ''}`;
        titleA.href = item.href || '#';
        titleA.textContent = item.title || 'Unknown';
        priceEl.innerHTML = formatPrice(item.price);
        openBtn.href = item.href || '#';

        // ‡∏õ‡πâ‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ + ‡πÅ‡∏ó‡πá‡∏Å
        subjectEl.innerHTML = '';
        chipsWrap.innerHTML = '';
        if (item.subject) {
          subjectEl.innerHTML = `<span class="badge pro">${item.subject}</span>`;
        }
        if (item.tags) {
          const tags = item.tags.split(/[, ]+/).filter(Boolean);
          tags.forEach(t=>{
            const sp = document.createElement('span');
            sp.className = 'chip';
            sp.textContent = `#${t}`;
            chipsWrap.appendChild(sp);
          });
        } else {
          chipsWrap.style.display = 'none';
        }

        btnFav.title = '‡∏ô‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡∏∏‡πä‡∏Ñ‡∏°‡∏≤‡∏£‡πå‡∏Ñ';
        btnFav.addEventListener('click', e=>{
          e.preventDefault();
          removeById(item.id);
        });

        listEl.appendChild(node);
      });

      listEl.setAttribute('aria-busy', 'false');
    }

    sortEl.addEventListener('change', render);
    clearBtn.addEventListener('click', ()=>{
      if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')){
        saveFavs([]);
        render();
      }
    });
    window.addEventListener('storage', e=>{
      if(e.key === LS_KEY || e.key === BADGE_KEY) render();
    });

    render();
  })();
  </script>

  <!-- Badge ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏ô‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏£‡∏∞‡∏Ü‡∏±‡∏á -->
  <script>
  (function(){
    'use strict';
    const ICON = document.querySelector('.cc-icon[href="/Teacher/notifications.html"]');
    if (!ICON) return;

    const badge = document.createElement('span');
    badge.className = 'noti-badge';
    badge.textContent = '0';
    Object.assign(badge.style, {
      position:'absolute', top:'3px', right:'3px',
      background:'#CC2F26', color:'#fff', borderRadius:'50%',
      fontSize:'10px', padding:'2px 5px', display:'none',
      fontWeight:'bold', minWidth:'16px', textAlign:'center', lineHeight:'1.2',
      pointerEvents:'none'
    });

    ICON.style.position = 'relative';
    ICON.appendChild(badge);

    function updateBadge() {
      const count = parseInt(localStorage.getItem('notifications.count') || '0', 10);
      badge.textContent = count;
      badge.style.display = count > 0 ? 'inline-block' : 'none';
    }
    updateBadge();
    window.addEventListener('storage', e => {
      if (e.key === 'notifications.count') updateBadge();
    });
  })();
  </script>
</body>
</html>
