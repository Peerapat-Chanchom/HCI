<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô | CodeClass</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Navbar -->
  <link rel="stylesheet" href="../CSS/navbar.css" />
  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
  <link rel="stylesheet" href="../CSS/notifications.css" />
</head>

<body>
  <!-- NAVBAR -->
  <header class="cc-navbar" role="navigation" aria-label="‡∏´‡∏•‡∏±‡∏Å">
    <div class="cc-nav-wrap">
      <a class="cc-brand" href="/Home/Home.html" aria-label="CodeClass ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">
        <span class="cc-logo" aria-hidden="true">‚¨¢</span>
        <strong class="cc-site">CodeClass</strong>
      </a>

      <ul class="cc-links">
        <li><a href="teacher.html">‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</a></li>
      </ul>

      <div class="cc-right">
        <!-- <button class="cc-btn ghost" onclick="location.href='teacher.html'">‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</button> -->
        <!-- <div class="cc-actions">
          <a class="cc-icon" href="inbox.html" aria-label="‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4c-1.1 0-2 .9-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
          </a> -->
          <!-- <a class="cc-icon" href="help.html" aria-label="‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.88 15h-1.8v-1.8h1.8V17zm1.9-6.8c-.22.35-.62.72-1.18 1.11-.4.28-.65.5-.73.66-.09.17-.13.41-.13.74H11v-.32c0-.34.06-.63.18-.86.12-.24.37-.49.73-.76.47-.34.78-.61.93-.82.15-.21.23-.45.23-.74 0-.39-.15-.71-.44-.96-.29-.25-.69-.38-1.2-.38-.49 0-.9.14-1.24.41-.33.27-.56.67-.68 1.19l-1.77-.2c.09-.8.43-1.43 1.01-1.9.58-.47 1.33-.7 2.26-.7 1.01 0 1.8.25 2.38.76.58.5.87 1.16.87 1.98 0 .43-.11.82-.33 1.17z"/></svg>
          </a> -->
<a class="cc-icon" href="favorites.html" aria-label="‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 21s-6.7-4.4-9.1-7.6C.6 10.8 1.4 7.2 4.4 6 6.3 5.2 8.3 5.7 9.7 7c.5.5.9 1.1 1.1 1.7.3-.6.7-1.2 1.2-1.7 1.4-1.4 3.4-1.8 5.3-.9 3 1.3 3.7 4.8 1.5 7.4C18.7 16.6 12 21 12 21z"/>
        </svg>
      </a>
          <a class="cc-icon" href="notifications.html" aria-label="‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô" aria-current="page">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 22a2 2 0 002-2H10a2 2 0 002 2zm6-6V11a6 6 0 10-12 0v5L4 18v1h16v-1l-2-2z"/></svg>
          </a>
          <a class="cc-avatar" href="/Profile/account.html" aria-label="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">
            <img src="https://i.pravatar.cc/36?img=68" alt="‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO + TOOLBAR -->
  <section class="notif-hero">
    <div class="container">
      <h1>‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô <span id="unreadBadge" class="badge-count">0</span></h1>

      <div class="toolbar" role="region" aria-label="‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥">
        <div class="tabs" role="tablist" aria-label="‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
          <button class="tab active" role="tab" aria-selected="true" data-filter="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          <button class="tab" role="tab" data-filter="unread">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô</button>
          <button class="tab" role="tab" data-filter="message">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
          <button class="tab" role="tab" data-filter="booking">‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
          <button class="tab" role="tab" data-filter="favorite">‡∏ñ‡∏π‡∏Å‡πÉ‡∏à</button>
          <button class="tab" role="tab" data-filter="system">‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div class="actions">
          <button id="btnMarkAll" class="cc-btn ghost">‡∏°‡∏≤‡∏£‡πå‡∏Å‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          <button id="btnClearRead" class="cc-btn ghost">‡∏•‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß</button>
        </div>
      </div>
    </div>
  </section>

  <!-- LIST -->
  <main class="container notif-list" id="notifList" role="list" aria-live="polite" aria-busy="false">
    <!-- JS ‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
  </main>

  <!-- Empty State -->
  <template id="tpl-empty">
    <section class="empty">
      <div class="empty-card">
        <div class="empty-emoji" aria-hidden="true">üîî</div>
        <h2>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h2>
        <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
        <a class="btn primary" href="teacher.html">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</a>
      </div>
    </section>
  </template>

  <!-- Template Notification -->
  <template id="tpl-item">
    <article class="notif" role="listitem">
      <div class="left">
        <div class="avatar-wrap">
          <img class="avatar" src="" alt="">
          <div class="type-icon" aria-hidden="true"></div>
        </div>
      </div>
      <div class="content">
        <header class="title-row">
          <h3 class="title"></h3>
          <time class="time" datetime=""></time>
        </header>
        <p class="body"></p>

        <div class="row-actions">
          <a class="btn primary open" href="#">‡πÄ‡∏õ‡∏¥‡∏î</a>
          <button class="btn ghost toggle-read">‡∏°‡∏≤‡∏£‡πå‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß</button>
          <button class="btn ghost danger delete">‡∏•‡∏ö</button>
        </div>
      </div>
    </article>
  </template>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-inner">
 ¬© 2025 Tutor ¬∑ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
    </div>
  </footer>

  <!-- Navbar badges -->
  <script src="navbar.js" defer></script>

  <!-- Logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
  <script>
  (function(){
    'use strict';

    const KEY = 'notifications.items';
    const COUNT_KEY = 'notifications.count';

    const $  = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    function load(){ try { return JSON.parse(localStorage.getItem(KEY)) || []; } catch { return []; } }
    function save(items){
      localStorage.setItem(KEY, JSON.stringify(items));
      const unread = items.filter(x => !x.read).length;
      localStorage.setItem(COUNT_KEY, String(unread));
      window.dispatchEvent(new StorageEvent('storage', { key: COUNT_KEY, newValue: String(unread) }));
    }

    function seedIfEmpty(){
      if(load().length) return;
      const now = Date.now();
      const items = [
        {
          id:'m1', type:'message', title:'‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Akira T.',
          body:'‚Äú‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™ 19:00 ‡∏ô. ‡∏™‡∏ô‡πÉ‡∏à‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö‚Äù',
          href:'inbox.html', avatar:'https://i.pravatar.cc/64?img=15',
          time: new Date(now - 15*60*1000).toISOString(), read:false
        },
        {
          id:'b1', type:'booking', title:'‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏±‡∏ö Diego R.',
          body:'‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ 19:00‚Äì19:55 (‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢) ‡∏ú‡πà‡∏≤‡∏ô Google Meet',
          href:'profile-diego.html', avatar:'https://i.pravatar.cc/64?img=64',
          time: new Date(now - 2*60*60*1000).toISOString(), read:false
        },
        {
          id:'f1', type:'favorite', title:'‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Michiel B. ‡∏•‡∏á ‚Äú‡∏ñ‡∏π‡∏Å‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‚Äù ‡πÅ‡∏•‡πâ‡∏ß',
          body:'‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å',
          href:'favorites.html', avatar:'https://i.pravatar.cc/64?img=12',
          time: new Date(now - 5*60*60*1000).toISOString(), read:true
        },
        {
          id:'m2', type:'message', title:'‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Lina S.',
          body:'‚Äú‡∏•‡∏≠‡∏á‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå Figma ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ö‡πÑ‡∏ß‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏±‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏Ñ‡πà‡∏∞‚Äù',
          href:'inbox.html', avatar:'https://i.pravatar.cc/64?img=47',
          time: new Date(now - 26*60*60*1000).toISOString(), read:true
        },
        {
          id:'s1', type:'system', title:'‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß',
          body:'‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô',
          href:'help.html', avatar:'', time: new Date(now - 3*24*60*60*1000).toISOString(), read:true
        }
      ];
      save(items);
    }

    function relTime(iso){
      const d = new Date(iso);
      const diff = Math.floor((Date.now() - d.getTime())/1000);
      if(diff < 60) return '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';
      const m = Math.floor(diff/60);
      if(m < 60) return m+' ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß';
      const h = Math.floor(m/60);
      if(h < 24) return h+' ‡∏ä‡∏°.‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß';
      const dday = Math.floor(h/24);
      if(dday === 1) return '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô';
      if(dday <= 7) return dday+' ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß';
      return d.toLocaleDateString('th-TH');
    }

    function iconHTML(type){
      const base = 'width:18px;height:18px;display:inline-block';
      if(type === 'message')  return `<svg style="${base}" viewBox="0 0 24 24"><path fill="currentColor" d="M20 4H4a2 2 0 00-2 2v12l4-3h14a2 2 0 002-2V6a2 2 0 00-2-2z"/></svg>`;
      if(type === 'booking')  return `<svg style="${base}" viewBox="0 0 24 24"><path fill="currentColor" d="M7 2v2H5a2 2 0 00-2 2v2h18V6a2 2 0 00-2-2h-2V2h-2v2H9V2H7zm14 8H3v8a2 2 0 002 2h14a2 2 0 002-2v-8z"/></svg>`;
      if(type === 'favorite') return `<svg style="${base}" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21s-6.7-4.4-9.1-7.6C.6 10.8 1.4 7.2 4.4 6c1.9-.8 3.9-.3 5.3 1 .5.5.9 1.1 1.1 1.7.3-.6.7-1.2 1.2-1.7 1.4-1.4 3.4-1.8 5.3-.9 3 1.3 3.7 4.8 1.5 7.4C18.7 16.6 12 21 12 21z"/></svg>`;
      return `<svg style="${base}" viewBox="0 0 24 24"><path fill="currentColor" d="M3 11v2h4l5 4V7l-5 4H3zm13.5 1a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/></svg>`;
    }

    const listEl = $('#notifList');
    const unreadBadge = $('#unreadBadge');
    let currentFilter = 'all';

    function render(){
      const items = load().sort((a,b)=> new Date(b.time)-new Date(a.time));
      const filtered = items.filter(n=>{
        if(currentFilter === 'all') return true;
        if(currentFilter === 'unread') return !n.read;
        return n.type === currentFilter;
      });

      const unread = items.filter(x=>!x.read).length;
      unreadBadge.textContent = unread;

      listEl.innerHTML = '';
      listEl.setAttribute('aria-busy', 'true');

      if(filtered.length === 0){
        const empty = document.importNode($('#tpl-empty').content, true);
        listEl.appendChild(empty);
        listEl.setAttribute('aria-busy', 'false');
        return;
      }

      const tpl = $('#tpl-item');
      filtered.forEach(n=>{
        const node = document.importNode(tpl.content, true);
        const art = node.querySelector('.notif');
        if(!n.read) art.classList.add('unread');

        const img = node.querySelector('.avatar');
        img.src = n.avatar || '';
        img.alt = n.avatar ? '‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå' : '‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô';
        node.querySelector('.type-icon').innerHTML = iconHTML(n.type);
        node.querySelector('.title').textContent = n.title;
        const t = node.querySelector('.time');
        t.textContent = relTime(n.time);
        t.setAttribute('datetime', n.time);
        node.querySelector('.body').textContent = n.body;
        node.querySelector('.open').href = n.href || '#';

        const toggle = node.querySelector('.toggle-read');
        toggle.textContent = n.read ? '‡∏°‡∏≤‡∏£‡πå‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô' : '‡∏°‡∏≤‡∏£‡πå‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
        toggle.addEventListener('click', (e)=>{
          e.preventDefault();
          const all = load();
          const i = all.findIndex(x=>x.id===n.id);
          if(i>=0){
            all[i].read = !all[i].read;
            save(all);
            render();
          }
        });

        node.querySelector('.delete').addEventListener('click', (e)=>{
          e.preventDefault();
          const all = load();
          const i = all.findIndex(x=>x.id===n.id);
          if(i>=0){
            all.splice(i,1);
            save(all);
            render();
          }
        });

        listEl.appendChild(node);
      });

      listEl.setAttribute('aria-busy', 'false');
    }

    $('#btnMarkAll').addEventListener('click', ()=>{
      const items = load();
      items.forEach(i=>i.read=true);
      save(items);
      render();
    });

    $('#btnClearRead').addEventListener('click', ()=>{
      const left = load().filter(i=>!i.read);
      save(left);
      render();
    });

    $$('.tab').forEach(tab=>{
      tab.addEventListener('click', ()=>{
        $$('.tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        currentFilter = tab.dataset.filter;
        render();
      });
    });

    window.addEventListener('storage', (e)=>{
      if(e.key === KEY || e.key === COUNT_KEY) render();
    });

    seedIfEmpty();
    render();
  })();
  </script>
</body>
</html>
